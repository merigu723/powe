<context>
  <input pattern="(hi|hello) *">

  <!-- Greet user if bot already knows the name -->
  <!-- We use "full" function here to check if UserName variable exists and has non empty value-->
  <output value="Hello $UserName" if="full($UserName)"/>

  <!-- "empty" fucntion checks if variable doesn't exist or has empty value -->
  <context if="empty($UserName)">
    <!-- Ask user about her name -->
    <output value="Hi! What is your name?"/>

    <input pattern="$Text">
      <!-- Store UserName variable with "user" scope -->
      <var name="UserName" value="$Text" scope="user"/>

      <output value="Nice to meet you $UserName!"/>
      <pattern name="Person" value="entity://hitnzipcodes"/>
      <input pattern="$Person">
          <var name="PersonName" value='get("name", $Person)'/>
          <output value="zipcode $PersonName!"/>
      </input>
      
      <context/> <!-- Jump to the root context while this context is not modal -->
    </input>
  </context>
</context>
